<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizMaster V2 - Vite Backend</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        h1 { color: #fff; margin-bottom: 1rem; }
        .status { background: rgba(0, 255, 0, 0.2); padding: 1rem; border-radius: 8px; margin: 1rem 0; }
        .endpoint { background: rgba(0, 0, 0, 0.2); padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0; font-family: monospace; }
        .button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .button:hover { background: #45a049; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 QuizMaster V2 - Vite Backend</h1>
        
        <div class="status">
            <h3>✅ Backend Status: Running</h3>
            <p>Your Vite-powered Express backend is successfully running with:</p>
            <ul>
                <li>🔥 Hot Module Replacement (HMR)</li>
                <li>🔐 AWS Cognito Authentication</li>
                <li>📊 Mock Database (Development)</li>
                <li>🛡️ JWT Token Validation</li>
                <li>👑 Admin Role Protection</li>
            </ul>
        </div>

        <h3>📡 API Endpoints</h3>
        <div class="endpoint">GET /</div>
        <div class="endpoint">GET /test-auth (requires JWT token)</div>
        <div class="endpoint">POST /auth/exchange-code</div>
        <div class="endpoint">GET /quizzes (requires auth)</div>
        <div class="endpoint">GET /questions/:quizId (requires auth)</div>
        <div class="endpoint">GET /scores (requires auth)</div>
        <div class="endpoint">GET /users (admin only)</div>

        <h3>🧪 Quick Tests</h3>
        <a href="/test-auth" class="button">Test Auth Endpoint</a>
        <a href="/quizzes" class="button">Test Quizzes</a>
        <a href="http://localhost:8081" class="button">Open Frontend</a>
        <a href="http://localhost:8081/auth-test" class="button">Auth Test Page</a>

        <h3>🔧 Development Features</h3>
        <ul>
            <li><strong>Auto-restart:</strong> Server restarts automatically on file changes</li>
            <li><strong>ES Modules:</strong> Modern JavaScript import/export syntax</li>
            <li><strong>Environment Variables:</strong> Loaded from .env file</li>
            <li><strong>Error Handling:</strong> Comprehensive error logging</li>
            <li><strong>CORS Enabled:</strong> Ready for frontend integration</li>
        </ul>

        <div style="margin-top: 2rem; padding: 1rem; background: rgba(0, 0, 0, 0.2); border-radius: 8px;">
            <h4>🎯 Next Steps:</h4>
            <ol>
                <li>Frontend is running on <a href="http://localhost:8081" style="color: #4CAF50;">http://localhost:8081</a></li>
                <li>Backend is running on <a href="http://localhost:5000" style="color: #4CAF50;">http://localhost:5000</a></li>
                <li>Test authentication flow with Cognito</li>
                <li>Both servers have hot reload enabled!</li>
            </ol>
        </div>
    </div>

    <script>
        // Add some interactivity
        console.log('🚀 QuizMaster V2 Vite Backend - Ready for development!');
        
        // Test API connectivity
        fetch('/test-auth')
            .then(response => {
                if (response.status === 401) {
                    console.log('✅ Auth endpoint working (requires token)');
                } else {
                    console.log('📡 API Response:', response.status);
                }
            })
            .catch(err => console.log('❌ API Error:', err));
    </script>
</body>
</html>